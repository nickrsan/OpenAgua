{% extends "master.html" %}
{% block title %} - pivot chart{% endblock %}
{% block head_main %}

<!--<script type="text/javascript" src="https://www.google.com/jsapi"></script>-->

<!--jquery UI-->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>

<!--plotly-->
<script type="text/javascript" src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<!--d3/c3-->
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.min.css">
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.min.js"></script>

<!--gchart-->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<!--pivottable.js-->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.1.0/pivot.min.css" type="text/css" media="all" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.1.0/pivot.min.js" type="text/javascript" charset="utf-8"></script>

<!--Chart renderers-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.1.0/c3_renderers.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.1.0/gchart_renderers.min.js" type="text/javascript" charset="utf-8"></script>
<script src="{{ url_for('.static', filename='js/plotly_renderers.js') }}" type="text/javascript" charset="utf-8"></script>

<!--OpenAgua-->
<link href="{{ url_for('.static', filename='css/pivot-results.css') }}" media="all" rel="stylesheet" type="text/css" />

<script>
var ttypes = {{ ttypes|tojson|safe }};
</script>

{% endblock %}

{% block content %}
<div class="container-fluid">
<div class="row">
    <div id="pivot_panel" class="col col-sm-12 col-md-9 col-lg-9">
        <div id="spinner"></div>
        <div id="pivot" style="width:100%"></div>
    </div>
    <div id="options" class="col col-sm-12 col-md-3 col-lg-3">
        <h4>Options</h4>
        <div>
            <label for="chart_renderer">Chart renderer</label>
            <select id='chart_renderer' class='selectpicker' data-width='auto'>
                <option value="plotly">Plotly</option>
                <option value="gchart">Google Charts</option>
                <option value="c3">C3</option>
            </select>
        </div>
        <br/>
        <h4>Filters</h4>
        <div>
            <select id='filterby' class='selectpicker' data-width='auto' title='Filter by...'>
                <option value="none">No filter</option>
                <option value="res_type" data-subtext="Reservoir, River, etc.">Feature type</option>
                <option value="attr" data-subtext="Storage, Flow, etc.">Variable</option>
            </select>
        </div>
        <div id="res_type_filter_container" class='filter' style="display:none">
            <!--<label for="res_type_filter">Feature type</label>-->
            <select id='res_type_filter' class='selectpicker' data-width='auto' multiple title='Select a feature type...' data-selected-text-format="count > 2" data-actions-box="true">
                {% for ttid in ttypes %}
                    <option data-id="{{ ttid }}">{{ ttypes[ttid].name }}</option>
                {% endfor %}
            </select>
        </div>
        <div id="attr_filter_container" class='filter' style='display:none'>
            <!--<label for="attr_filter">Variable type</label>-->
            <select id='attr_filter' class='selectpicker' data-width='auto' multiple title='Select a variable...' data-selected-text-format="count > 2" data-actions-box="true">
                {% for ttid in ttypes %}
                    <option data-id="{{ ttid }}">{{ ttypes[ttid].name }}</option>
                {% endfor %}
            </select>
        </div>
        <div id="secondary_filter_container" class='filter' style='display:none'>
            <select id='secondary_filter' class='selectpicker' data-width='auto' multiple data-selected-text-format="count > 2" data-actions-box="true">
            </select>
        </div>
        <br/>
        <div>
            <button id='load_options' class='btn btn-default pull-right'>Load</button>
        </div>
        <!--<div>-->
            <!--<button id="save_as_thumbnail" class="btn btn-default">Set as icon</button>-->
          <!--</div>-->
    </div>

    
</div>
</div>


{% endblock %}

{% block endscript %}

<script src="{{ url_for('.static', filename='js/pivot-results.js') }}" type="text/javascript" charset="utf-8"></script>

{% endblock %}
