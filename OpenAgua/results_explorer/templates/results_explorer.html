{% extends "master.html" %}
{% block title %} - Results Explorer{% endblock %}
{% block head_main %}

<link href="{{ url_for('.static', filename='css/results_explorer.css') }}" media="all" rel="stylesheet" type="text/css" />

{% endblock %}

{% block content %}

<script>
  var dateFormat = "{{ session['amchart_date_format'] }}" // need to get this from the model setup
</script>

<div class="container-fluid" style="margin-left:0px;margin-right:0px">

  <div class="row" style="margin-top:15px;margin-bottom:15px">
  
    <!--select a feature-->
    <div class="col-sm-6 col-md-3">    
      <div class="form-group">
        <label for="features">Feature</label>
        <select id="features" class="selectpicker" data-live-search="true" data-width="100%" title="Select a feature">  
        {% for (type_id, type_name, feature_type), feats in features.items() %}
          <optgroup label="{{ type_name }}">
          {% for f in feats %}
            <option data-tags='{"type_id": {{type_id}}, "feature_id": {{f.id}}, "feature_type": "{{feature_type}}"}'>{{f.name}}</option>
          {% endfor %}
          </optgroup>
        {% endfor %}
        </select>
      </div>
    </div>
    
    <!--select a variable-->
    <div class="col-sm-6 col-md-3">
      <div class="form-group">
        <label for="variables">Variable</label>
        <select id="variables" class="selectpicker show-menu-arrow" data-live-search="true" data-width="100%" disabled title="Select a feature first">
        </select>
      </div>
    </div>

    <div class="col-sm-6 col-md-3">
      <!--select a scenario-->
      <div class="form-group">
        <label for="scenarios">Scenario</label>
        <select id="scenarios" class="selectpicker show-menu-arrow" data-live-search="true" data-width="100%" disabled title="Select a feature/variable first">
        {% for scenario in scenarios %}
          <option data-tags='{"scen_id": {{scenario.id}}, "scen_name": "{{scenario.name}}"}'>{{scenario.name}}</option>
        {% endfor %}
        </select>
      </div>
    </div>

  </div>

  <div class="row" style="margin-bottom:20px">
    <div id="viewers" class="col-md-8 col-sm-7">
      
      <!--begin graphical output-->
      <label id="output_label" for="input">Graphical results</label>
      <div id="output" class="viewer_contents">
      
	<div id="output_status" class='viewer_status'>No data to display</div>
      
	<!--scalar viewer-->
	<div id="scalar_output" class="output scalar viewer"></div>
	
	<!--timeseries viewer-->
	<div id="timeseries_output" class="output timeseries viewer"></div>
	
	<!--array viewer-->
	<div id="array_output" class="output array viewer"></div>
	
	<div id='unit' class='unit'></div>
  
      </div>
      <!--end graphical output-->
    </div>
    
    <div id="viewers" class="col-md-4 col-sm-5">
  
      <!--begin table-->
      <label id="table_label" for="table" style="display:none;">Tabular results</label>
      <div id="table" class='viewer_contents'>
	    
	<!--<div id="table_status" class='viewer_status'>No data to display</div>-->
	
	<!--timeseries table-->
	<div id="timeseries_table" class="table_viewer timeseries viewer"></div>
	
	<!--array table-->
	<div id="array_table" class="output_viewer array viewer"></div>
	
	<div id='unit' class='unit'></div>
      
      </div>
      <!--end table-->
    </div>
  </div>
  
  <div class="row" style="margin-bottom:20px">
    <div id="viewers" class="col-md-12 col-sm-12">
  
      <!--begin input-->
      <label id="input_label" for="input">Input</label>
      <div id="input" class="viewer_contents">
  
	<div id="input_status" class='viewer_status'>No data loaded</div>
	
	<!--scalar input-->
	<div id="scalar_input" class="input_viewer scalar viewer">
	  <label class="control-label sr-only sr-only-focusable" for="scalar_input_field">Number:</label>
	  <input id="scalar_input_field" type="text" class="form-control" placeholder="No data entered">
	</div>
  
	<!--function input-->
	<div id="function_input" class="input_viewer function viewer"></div>
	
	<!--timeseries table input-->
	<div id="timeseries_table_input" class="input_viewer timeseries_table viewer"></div>
	
	<!--array table input-->
	<div id="array_table_input" class="input_viewer array_table viewer"></div>
	
	<!--text input-->
	<div id="text_input" class="input_viewer descriptor viewer">
	  <label class="control-label sr-only sr-only-focusable" for="text_input_field">Text:</label>
	  <textarea id="text_intput_field" class="form-control" rows="3" placeholder="Enter some text..."></textarea>
	</div>
	
	<div id='unit' class='unit'></div>
	    
      </div>
      <!--end input-->
      
    </div>
  </div>
</div>

{% endblock %}

{% block endscript %}

<script>
var template_id = {{session['template_id']}}
</script>

<script src="{{ url_for('.static', filename='js/handsontable.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ url_for('.static', filename='js/amchart.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ url_for('.static', filename='js/results_explorer.js') }}" type="text/javascript" charset="utf-8"></script>

{% endblock %}
